<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="naver-site-verification" content="6e24a11cf15ee701f05bfe07ff086c5730400e73"><meta><title>jupyter - Jay Sung&#039;s DS blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Jay Sung&#039;s DS blog"><meta name="msapplication-TileImage" content="https://i.imgur.com/ijBb95M.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Jay Sung&#039;s DS blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="Feature Selection for Uplift Modeling This notebook includes two sections: - Feature selection: demonstrate how to use Filter methods to select the most important numeric features - Performance evalua"><meta property="og:type" content="blog"><meta property="og:title" content="jupyter"><meta property="og:url" content="https://jaysung00.github.io/2020/12/17/jupyter/"><meta property="og:site_name" content="Jay Sung&#039;s DS blog"><meta property="og:description" content="Feature Selection for Uplift Modeling This notebook includes two sections: - Feature selection: demonstrate how to use Filter methods to select the most important numeric features - Performance evalua"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://jaysung00.github.io/.io//jupyter_38_0.png"><meta property="article:published_time" content="2020-12-17T11:19:15.000Z"><meta property="article:modified_time" content="2020-12-17T11:44:00.148Z"><meta property="article:author" content="Jay Sung"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/.io//jupyter_38_0.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://jaysung00.github.io/2020/12/17/jupyter/"},"headline":"Jay Sung's DS blog","image":["https://jaysung00.github.io/.io//jupyter_38_0.png"],"datePublished":"2020-12-17T11:19:15.000Z","dateModified":"2020-12-17T11:44:00.148Z","author":{"@type":"Person","name":"Jay Sung"},"description":"Feature Selection for Uplift Modeling This notebook includes two sections: - Feature selection: demonstrate how to use Filter methods to select the most important numeric features - Performance evalua"}</script><link rel="canonical" href="https://jaysung00.github.io/2020/12/17/jupyter/"><link rel="icon" href="https://i.imgur.com/ijBb95M.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-182943513-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-182943513-1');</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/rss2.xml" title="Jay Sung's DS blog" type="application/rss+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://i.imgur.com/fQTl3A4.png" alt="Jay Sung&#039;s DS blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/About-this-blog/">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/jaysung00"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-10-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time datetime="2020-12-17T11:19:15.000Z" title="2020-12-17T11:19:15.000Z">2020-12-17</time></span><span class="level-item">Updated&nbsp;<time datetime="2020-12-17T11:44:00.148Z" title="2020-12-17T11:44:00.148Z">2020-12-17</time></span></div></div><h1 class="title is-3 is-size-4-mobile">jupyter</h1><div class="content"><h1><span id="feature-selection-for-uplift-modeling">Feature Selection for Uplift Modeling</span></h1>
<p>This notebook includes two sections:<br>
- <strong>Feature selection</strong>: demonstrate how to use Filter methods to select the most important numeric features - <strong>Performance evaluation</strong>: evaluate the AUUC performance with top features dataset</p>
<p><em>(Paper reference: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://arxiv.org/abs/2005.03447">Zhao, Zhenyu, et al. "Feature Selection Methods for Uplift Modeling." arXiv preprint arXiv:2005.03447 (2020).</a>)</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> causalml.dataset <span class="keyword">import</span> make_uplift_classification</span><br></pre></td></tr></table></figure>
<pre><code>The sklearn.utils.testing module is  deprecated in version 0.22 and will be removed in version 0.24. The corresponding classes / functions should instead be imported from sklearn.utils. Anything that cannot be imported from sklearn.utils is now part of the private API.</code></pre>
<h4><span id="import-filterselect-class-for-filter-methods">Import FilterSelect class for Filter methods</span></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> causalml.feature_selection.filters <span class="keyword">import</span> FilterSelect</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> causalml.inference.tree <span class="keyword">import</span> UpliftRandomForestClassifier</span><br><span class="line"><span class="keyword">from</span> causalml.inference.meta <span class="keyword">import</span> BaseXRegressor, BaseRRegressor, BaseSRegressor, BaseTRegressor</span><br><span class="line"><span class="keyword">from</span> causalml.metrics <span class="keyword">import</span> plot_gain, auuc_score</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logger = logging.getLogger(<span class="string">&#x27;causalml&#x27;</span>)</span><br><span class="line">logging.basicConfig(level=logging.INFO)</span><br></pre></td></tr></table></figure>
<h3><span id="generate-dataset">Generate dataset</span></h3>
<p>Generate synthetic data using the built-in function.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define parameters for simulation</span></span><br><span class="line"></span><br><span class="line">y_name = <span class="string">&#x27;conversion&#x27;</span></span><br><span class="line">treatment_group_keys = [<span class="string">&#x27;control&#x27;</span>, <span class="string">&#x27;treatment1&#x27;</span>]</span><br><span class="line">n = <span class="number">100000</span></span><br><span class="line">n_classification_features = <span class="number">50</span></span><br><span class="line">n_classification_informative = <span class="number">10</span></span><br><span class="line">n_classification_repeated = <span class="number">0</span></span><br><span class="line">n_uplift_increase_dict = &#123;<span class="string">&#x27;treatment1&#x27;</span>: <span class="number">8</span>&#125;</span><br><span class="line">n_uplift_decrease_dict = &#123;<span class="string">&#x27;treatment1&#x27;</span>: <span class="number">4</span>&#125;</span><br><span class="line">delta_uplift_increase_dict = &#123;<span class="string">&#x27;treatment1&#x27;</span>: <span class="number">0.1</span>&#125;</span><br><span class="line">delta_uplift_decrease_dict = &#123;<span class="string">&#x27;treatment1&#x27;</span>: <span class="number">-0.1</span>&#125;</span><br><span class="line"></span><br><span class="line">random_seed = <span class="number">20200808</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df, X_names = make_uplift_classification(</span><br><span class="line">    treatment_name=treatment_group_keys,</span><br><span class="line">    y_name=y_name,</span><br><span class="line">    n_samples=n,</span><br><span class="line">    n_classification_features=n_classification_features,</span><br><span class="line">    n_classification_informative=n_classification_informative,</span><br><span class="line">    n_classification_repeated=n_classification_repeated,</span><br><span class="line">    n_uplift_increase_dict=n_uplift_increase_dict,</span><br><span class="line">    n_uplift_decrease_dict=n_uplift_decrease_dict,</span><br><span class="line">    delta_uplift_increase_dict = delta_uplift_increase_dict, </span><br><span class="line">    delta_uplift_decrease_dict = delta_uplift_decrease_dict,</span><br><span class="line">    random_seed=random_seed</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<pre><code>INFO:numexpr.utils:NumExpr defaulting to 4 threads.</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
treatment_group_key
</th>
<th>
x1_informative
</th>
<th>
x2_informative
</th>
<th>
x3_informative
</th>
<th>
x4_informative
</th>
<th>
x5_informative
</th>
<th>
x6_informative
</th>
<th>
x7_informative
</th>
<th>
x8_informative
</th>
<th>
x9_informative
</th>
<th>
...
</th>
<th>
x56_uplift_increase
</th>
<th>
x57_uplift_increase
</th>
<th>
x58_uplift_increase
</th>
<th>
x59_increase_mix
</th>
<th>
x60_uplift_decrease
</th>
<th>
x61_uplift_decrease
</th>
<th>
x62_uplift_decrease
</th>
<th>
x63_uplift_decrease
</th>
<th>
conversion
</th>
<th>
treatment_effect
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
control
</td>
<td>
0.653960
</td>
<td>
-0.217603
</td>
<td>
1.856916
</td>
<td>
-0.075662
</td>
<td>
0.080971
</td>
<td>
-0.338374
</td>
<td>
-1.011470
</td>
<td>
0.528000
</td>
<td>
0.115418
</td>
<td>
...
</td>
<td>
1.533832
</td>
<td>
-2.183001
</td>
<td>
1.839608
</td>
<td>
0.755302
</td>
<td>
1.835047
</td>
<td>
-0.458431
</td>
<td>
-1.927525
</td>
<td>
2.765331
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
1
</th>
<td>
control
</td>
<td>
3.439658
</td>
<td>
0.477855
</td>
<td>
-0.377658
</td>
<td>
-1.317121
</td>
<td>
0.861815
</td>
<td>
-0.393180
</td>
<td>
0.503727
</td>
<td>
2.323846
</td>
<td>
1.229948
</td>
<td>
...
</td>
<td>
-1.192333
</td>
<td>
-1.581815
</td>
<td>
2.423700
</td>
<td>
2.396904
</td>
<td>
0.296043
</td>
<td>
-1.961940
</td>
<td>
-1.444725
</td>
<td>
1.469213
</td>
<td>
1
</td>
<td>
0
</td>
</tr>
<tr>
<th>
2
</th>
<td>
treatment1
</td>
<td>
0.130907
</td>
<td>
-0.333536
</td>
<td>
0.474847
</td>
<td>
-0.352067
</td>
<td>
-0.024502
</td>
<td>
1.437105
</td>
<td>
0.566178
</td>
<td>
-0.232508
</td>
<td>
0.866236
</td>
<td>
...
</td>
<td>
-0.301982
</td>
<td>
-0.933816
</td>
<td>
0.475274
</td>
<td>
1.540994
</td>
<td>
0.698066
</td>
<td>
0.545091
</td>
<td>
-0.084405
</td>
<td>
-2.337347
</td>
<td>
1
</td>
<td>
0
</td>
</tr>
<tr>
<th>
3
</th>
<td>
treatment1
</td>
<td>
-2.156683
</td>
<td>
1.120198
</td>
<td>
0.174293
</td>
<td>
-1.741426
</td>
<td>
0.488993
</td>
<td>
0.638340
</td>
<td>
-0.721928
</td>
<td>
1.802134
</td>
<td>
1.097178
</td>
<td>
...
</td>
<td>
-2.129098
</td>
<td>
-1.183581
</td>
<td>
0.000318
</td>
<td>
1.105735
</td>
<td>
-0.629281
</td>
<td>
-0.737041
</td>
<td>
-1.525081
</td>
<td>
1.416042
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
4
</th>
<td>
control
</td>
<td>
-2.708572
</td>
<td>
-0.799698
</td>
<td>
-2.199595
</td>
<td>
0.574077
</td>
<td>
0.083142
</td>
<td>
-0.389140
</td>
<td>
1.492101
</td>
<td>
1.725202
</td>
<td>
1.194315
</td>
<td>
...
</td>
<td>
1.582041
</td>
<td>
-1.176077
</td>
<td>
1.686322
</td>
<td>
0.480035
</td>
<td>
1.780710
</td>
<td>
0.862094
</td>
<td>
0.128872
</td>
<td>
-2.851344
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
</tbody>
</table>
<p>
5 rows Ã— 66 columns
</p>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Look at the conversion rate and sample size in each group</span></span><br><span class="line">df.pivot_table(values=<span class="string">&#x27;conversion&#x27;</span>,</span><br><span class="line">               index=<span class="string">&#x27;treatment_group_key&#x27;</span>,</span><br><span class="line">               aggfunc=[np.mean, np.size],</span><br><span class="line">               margins=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr>
<th>
</th>
<th>
mean
</th>
<th>
size
</th>
</tr>
<tr>
<th>
</th>
<th>
conversion
</th>
<th>
conversion
</th>
</tr>
<tr>
<th>
treatment_group_key
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
control
</th>
<td>
0.499050
</td>
<td>
100000
</td>
</tr>
<tr>
<th>
treatment1
</th>
<td>
0.599680
</td>
<td>
100000
</td>
</tr>
<tr>
<th>
All
</th>
<td>
0.549365
</td>
<td>
200000
</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X_names</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;x1_informative&#39;,
 &#39;x2_informative&#39;,
 &#39;x3_informative&#39;,
 &#39;x4_informative&#39;,
 &#39;x5_informative&#39;,
 &#39;x6_informative&#39;,
 &#39;x7_informative&#39;,
 &#39;x8_informative&#39;,
 &#39;x9_informative&#39;,
 &#39;x10_informative&#39;,
 &#39;x11_irrelevant&#39;,
 &#39;x12_irrelevant&#39;,
 &#39;x13_irrelevant&#39;,
 &#39;x14_irrelevant&#39;,
 &#39;x15_irrelevant&#39;,
 &#39;x16_irrelevant&#39;,
 &#39;x17_irrelevant&#39;,
 &#39;x18_irrelevant&#39;,
 &#39;x19_irrelevant&#39;,
 &#39;x20_irrelevant&#39;,
 &#39;x21_irrelevant&#39;,
 &#39;x22_irrelevant&#39;,
 &#39;x23_irrelevant&#39;,
 &#39;x24_irrelevant&#39;,
 &#39;x25_irrelevant&#39;,
 &#39;x26_irrelevant&#39;,
 &#39;x27_irrelevant&#39;,
 &#39;x28_irrelevant&#39;,
 &#39;x29_irrelevant&#39;,
 &#39;x30_irrelevant&#39;,
 &#39;x31_irrelevant&#39;,
 &#39;x32_irrelevant&#39;,
 &#39;x33_irrelevant&#39;,
 &#39;x34_irrelevant&#39;,
 &#39;x35_irrelevant&#39;,
 &#39;x36_irrelevant&#39;,
 &#39;x37_irrelevant&#39;,
 &#39;x38_irrelevant&#39;,
 &#39;x39_irrelevant&#39;,
 &#39;x40_irrelevant&#39;,
 &#39;x41_irrelevant&#39;,
 &#39;x42_irrelevant&#39;,
 &#39;x43_irrelevant&#39;,
 &#39;x44_irrelevant&#39;,
 &#39;x45_irrelevant&#39;,
 &#39;x46_irrelevant&#39;,
 &#39;x47_irrelevant&#39;,
 &#39;x48_irrelevant&#39;,
 &#39;x49_irrelevant&#39;,
 &#39;x50_irrelevant&#39;,
 &#39;x51_uplift_increase&#39;,
 &#39;x52_uplift_increase&#39;,
 &#39;x53_uplift_increase&#39;,
 &#39;x54_uplift_increase&#39;,
 &#39;x55_uplift_increase&#39;,
 &#39;x56_uplift_increase&#39;,
 &#39;x57_uplift_increase&#39;,
 &#39;x58_uplift_increase&#39;,
 &#39;x59_increase_mix&#39;,
 &#39;x60_uplift_decrease&#39;,
 &#39;x61_uplift_decrease&#39;,
 &#39;x62_uplift_decrease&#39;,
 &#39;x63_uplift_decrease&#39;]</code></pre>
<h2><span id="feature-selection-with-filter-methods">Feature selection with Filter methods</span></h2>
<h3><span id="method-f-f-statistics">method = F (F statistics)</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter_f = FilterSelect() </span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">method = <span class="string">&#x27;F&#x27;</span></span><br><span class="line">f_imp = filter_f.get_importance(df, X_names, y_name, method, </span><br><span class="line">                      treatment_group = <span class="string">&#x27;treatment1&#x27;</span>)</span><br><span class="line">print(f_imp)</span><br></pre></td></tr></table></figure>
<pre><code>      method              feature  rank        score        p_value  \
0   F filter  x57_uplift_increase   1.0  1973.380496   0.000000e+00   
0   F filter  x51_uplift_increase   2.0  1885.342364   0.000000e+00   
0   F filter  x54_uplift_increase   3.0  1496.254091   0.000000e+00   
0   F filter  x58_uplift_increase   4.0  1269.167710  4.224019e-277   
0   F filter       x9_informative   5.0   677.066204  5.151887e-149   
0   F filter  x63_uplift_decrease   6.0     9.108409   2.544691e-03   
0   F filter  x61_uplift_decrease   7.0     5.978189   1.448472e-02   
0   F filter       x19_irrelevant   8.0     5.295584   2.138059e-02   
0   F filter       x46_irrelevant   9.0     5.237353   2.210792e-02   
0   F filter       x27_irrelevant  10.0     4.573196   3.247713e-02   
0   F filter       x11_irrelevant  11.0     4.297030   3.818027e-02   
0   F filter       x39_irrelevant  12.0     4.009421   4.524803e-02   
0   F filter       x42_irrelevant  13.0     3.788770   5.159896e-02   
0   F filter  x60_uplift_decrease  14.0     3.089516   7.879975e-02   
0   F filter  x53_uplift_increase  15.0     2.884902   8.941499e-02   
0   F filter       x18_irrelevant  16.0     2.863763   9.059688e-02   
0   F filter       x22_irrelevant  17.0     2.402012   1.211809e-01   
0   F filter  x62_uplift_decrease  18.0     2.310073   1.285396e-01   
0   F filter       x40_irrelevant  19.0     2.262581   1.325346e-01   
0   F filter       x14_irrelevant  20.0     2.152103   1.423763e-01   
0   F filter       x8_informative  21.0     1.947212   1.628892e-01   
0   F filter       x33_irrelevant  22.0     1.691045   1.934648e-01   
0   F filter       x47_irrelevant  23.0     1.622995   2.026761e-01   
0   F filter       x28_irrelevant  24.0     1.525337   2.168150e-01   
0   F filter       x7_informative  25.0     1.206987   2.719311e-01   
0   F filter     x59_increase_mix  26.0     1.199216   2.734798e-01   
0   F filter       x20_irrelevant  27.0     1.176234   2.781252e-01   
0   F filter       x41_irrelevant  28.0     1.119234   2.900848e-01   
0   F filter       x3_informative  29.0     1.011457   3.145553e-01   
0   F filter       x16_irrelevant  30.0     0.999273   3.174877e-01   
..       ...                  ...   ...          ...            ...   
0   F filter       x2_informative  34.0     0.775075   3.786527e-01   
0   F filter       x45_irrelevant  35.0     0.746410   3.876164e-01   
0   F filter       x31_irrelevant  36.0     0.670080   4.130248e-01   
0   F filter  x55_uplift_increase  37.0     0.609454   4.349944e-01   
0   F filter       x34_irrelevant  38.0     0.606343   4.361689e-01   
0   F filter       x44_irrelevant  39.0     0.563659   4.527906e-01   
0   F filter       x12_irrelevant  40.0     0.531649   4.659151e-01   
0   F filter       x4_informative  41.0     0.412528   5.206899e-01   
0   F filter       x26_irrelevant  42.0     0.348929   5.547207e-01   
0   F filter       x48_irrelevant  43.0     0.348312   5.550711e-01   
0   F filter       x25_irrelevant  44.0     0.333696   5.634916e-01   
0   F filter       x24_irrelevant  45.0     0.330729   5.652307e-01   
0   F filter       x23_irrelevant  46.0     0.327771   5.669751e-01   
0   F filter  x52_uplift_increase  47.0     0.316966   5.734374e-01   
0   F filter       x37_irrelevant  48.0     0.246766   6.193618e-01   
0   F filter       x15_irrelevant  49.0     0.225643   6.347740e-01   
0   F filter       x29_irrelevant  50.0     0.196632   6.574534e-01   
0   F filter       x38_irrelevant  51.0     0.109701   7.404853e-01   
0   F filter       x35_irrelevant  52.0     0.101365   7.501982e-01   
0   F filter      x10_informative  53.0     0.094686   7.583024e-01   
0   F filter       x21_irrelevant  54.0     0.056172   8.126528e-01   
0   F filter       x43_irrelevant  55.0     0.043168   8.354093e-01   
0   F filter       x13_irrelevant  56.0     0.013480   9.075699e-01   
0   F filter       x49_irrelevant  57.0     0.008037   9.285639e-01   
0   F filter       x17_irrelevant  58.0     0.005137   9.428651e-01   
0   F filter       x30_irrelevant  59.0     0.004151   9.486301e-01   
0   F filter       x50_irrelevant  60.0     0.001379   9.703808e-01   
0   F filter       x36_irrelevant  61.0     0.001062   9.740069e-01   
0   F filter       x6_informative  62.0     0.000428   9.834997e-01   
0   F filter       x5_informative  63.0     0.000076   9.930457e-01   

                               misc  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
..                              ...  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  
0   df_num: 1.0, df_denom: 199996.0  

[63 rows x 6 columns]</code></pre>
<h3><span id="method-lr-likelihood-ratio-test">method = LR (likelihood ratio test)</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">method = <span class="string">&#x27;LR&#x27;</span></span><br><span class="line">lr_imp = filter_f.get_importance(df, X_names, y_name, method, </span><br><span class="line">                      treatment_group = <span class="string">&#x27;treatment1&#x27;</span>)</span><br><span class="line">print(lr_imp)</span><br></pre></td></tr></table></figure>
<pre><code>Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683135
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.570527
         Iterations 6
Optimization terminated successfully.
         Current function value: 0.568449
         Iterations 6
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683127
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683134
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683129
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683137
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683135
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683137
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683131
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683125
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683139
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683137
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683135
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683139
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683137
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683135
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683126
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683135
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683133
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683139
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683126
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683113
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683138
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683134
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.678404
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.673481
         Iterations 5
Optimization terminated successfully.
         Current function value: 0.683139
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683139
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683136
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.678797
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.674807
         Iterations 5
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683141
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683139
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.678449
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.673272
         Iterations 5
Optimization terminated successfully.
         Current function value: 0.679964
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.676614
         Iterations 5
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683140
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683142
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683134
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683128
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683137
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683143
         Iterations 4
Optimization terminated successfully.
         Current function value: 0.683120
         Iterations 4
       method              feature  rank        score   p_value   misc
0   LR filter  x57_uplift_increase   1.0  2070.582853  0.000000  df: 1
0   LR filter  x51_uplift_increase   2.0  1969.081668  0.000000  df: 1
0   LR filter  x54_uplift_increase   3.0  1596.059562  0.000000  df: 1
0   LR filter  x58_uplift_increase   4.0  1339.970602  0.000000  df: 1
0   LR filter       x9_informative   5.0   830.925812  0.000000  df: 1
0   LR filter  x63_uplift_decrease   6.0     9.149363  0.002488  df: 1
0   LR filter  x61_uplift_decrease   7.0     6.013194  0.014199  df: 1
0   LR filter       x46_irrelevant   8.0     5.484790  0.019183  df: 1
0   LR filter       x19_irrelevant   9.0     5.345715  0.020773  df: 1
0   LR filter       x27_irrelevant  10.0     4.433104  0.035248  df: 1
0   LR filter       x11_irrelevant  11.0     4.422047  0.035477  df: 1
0   LR filter       x39_irrelevant  12.0     3.874147  0.049035  df: 1
0   LR filter       x42_irrelevant  13.0     3.735743  0.053260  df: 1
0   LR filter  x60_uplift_decrease  14.0     3.138529  0.076463  df: 1
0   LR filter  x53_uplift_increase  15.0     2.865203  0.090514  df: 1
0   LR filter       x18_irrelevant  16.0     2.840988  0.091888  df: 1
0   LR filter       x22_irrelevant  17.0     2.504072  0.113552  df: 1
0   LR filter  x62_uplift_decrease  18.0     2.317535  0.127923  df: 1
0   LR filter       x14_irrelevant  19.0     2.226707  0.135643  df: 1
0   LR filter       x40_irrelevant  20.0     2.197060  0.138274  df: 1
0   LR filter       x8_informative  21.0     1.884233  0.169854  df: 1
0   LR filter       x47_irrelevant  22.0     1.698939  0.192427  df: 1
0   LR filter       x33_irrelevant  23.0     1.676522  0.195387  df: 1
0   LR filter       x28_irrelevant  24.0     1.493135  0.221731  df: 1
0   LR filter       x7_informative  25.0     1.249156  0.263714  df: 1
0   LR filter     x59_increase_mix  26.0     1.197540  0.273814  df: 1
0   LR filter       x41_irrelevant  27.0     1.139287  0.285803  df: 1
0   LR filter       x20_irrelevant  28.0     1.109899  0.292104  df: 1
0   LR filter       x1_informative  29.0     1.014855  0.313743  df: 1
0   LR filter       x3_informative  30.0     0.992359  0.319166  df: 1
..        ...                  ...   ...          ...       ...    ...
0   LR filter       x32_irrelevant  34.0     0.764228  0.382009  df: 1
0   LR filter       x2_informative  35.0     0.732987  0.391917  df: 1
0   LR filter       x31_irrelevant  36.0     0.705755  0.400857  df: 1
0   LR filter  x55_uplift_increase  37.0     0.598018  0.439335  df: 1
0   LR filter       x44_irrelevant  38.0     0.590518  0.442219  df: 1
0   LR filter       x34_irrelevant  39.0     0.556178  0.455804  df: 1
0   LR filter       x12_irrelevant  40.0     0.549555  0.458499  df: 1
0   LR filter       x4_informative  41.0     0.392499  0.530989  df: 1
0   LR filter       x48_irrelevant  42.0     0.357407  0.549950  df: 1
0   LR filter       x26_irrelevant  43.0     0.346474  0.556116  df: 1
0   LR filter       x24_irrelevant  44.0     0.321736  0.570566  df: 1
0   LR filter       x23_irrelevant  45.0     0.316385  0.573789  df: 1
0   LR filter       x25_irrelevant  46.0     0.310967  0.577087  df: 1
0   LR filter  x52_uplift_increase  47.0     0.289571  0.590495  df: 1
0   LR filter       x37_irrelevant  48.0     0.267554  0.604977  df: 1
0   LR filter       x15_irrelevant  49.0     0.215249  0.642684  df: 1
0   LR filter       x29_irrelevant  50.0     0.192926  0.660492  df: 1
0   LR filter       x35_irrelevant  51.0     0.120501  0.728492  df: 1
0   LR filter       x38_irrelevant  52.0     0.116905  0.732416  df: 1
0   LR filter      x10_informative  53.0     0.107143  0.743421  df: 1
0   LR filter       x21_irrelevant  54.0     0.042848  0.836011  df: 1
0   LR filter       x43_irrelevant  55.0     0.036466  0.848557  df: 1
0   LR filter       x13_irrelevant  56.0     0.012543  0.910826  df: 1
0   LR filter       x17_irrelevant  57.0     0.011252  0.915523  df: 1
0   LR filter       x49_irrelevant  58.0     0.005559  0.940565  df: 1
0   LR filter       x36_irrelevant  59.0     0.002396  0.960964  df: 1
0   LR filter       x50_irrelevant  60.0     0.001808  0.966086  df: 1
0   LR filter       x30_irrelevant  61.0     0.000956  0.975339  df: 1
0   LR filter       x6_informative  62.0     0.000732  0.978420  df: 1
0   LR filter       x5_informative  63.0     0.000029  0.995726  df: 1

[63 rows x 6 columns]</code></pre>
<h3><span id="method-kl-kl-divergence">method = KL (KL divergence)</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">method = <span class="string">&#x27;KL&#x27;</span></span><br><span class="line">kl_imp = filter_f.get_importance(df, X_names, y_name, method, </span><br><span class="line">                      treatment_group = <span class="string">&#x27;treatment1&#x27;</span>,</span><br><span class="line">                      n_bins=<span class="number">10</span>)</span><br><span class="line">print(kl_imp)</span><br></pre></td></tr></table></figure>
<pre><code>       method              feature  rank     score p_value                misc
0   KL filter  x51_uplift_increase   1.0  0.026008    None  number_of_bins: 10
0   KL filter  x57_uplift_increase   2.0  0.023749    None  number_of_bins: 10
0   KL filter       x9_informative   3.0  0.020550    None  number_of_bins: 10
0   KL filter  x54_uplift_increase   4.0  0.018411    None  number_of_bins: 10
0   KL filter  x58_uplift_increase   5.0  0.014443    None  number_of_bins: 10
0   KL filter  x52_uplift_increase   6.0  0.002416    None  number_of_bins: 10
0   KL filter  x55_uplift_increase   7.0  0.000283    None  number_of_bins: 10
0   KL filter       x23_irrelevant   8.0  0.000221    None  number_of_bins: 10
0   KL filter     x59_increase_mix   9.0  0.000218    None  number_of_bins: 10
0   KL filter       x21_irrelevant  10.0  0.000206    None  number_of_bins: 10
0   KL filter       x15_irrelevant  11.0  0.000157    None  number_of_bins: 10
0   KL filter       x11_irrelevant  12.0  0.000155    None  number_of_bins: 10
0   KL filter       x46_irrelevant  13.0  0.000150    None  number_of_bins: 10
0   KL filter       x39_irrelevant  14.0  0.000146    None  number_of_bins: 10
0   KL filter  x53_uplift_increase  15.0  0.000142    None  number_of_bins: 10
0   KL filter      x10_informative  16.0  0.000137    None  number_of_bins: 10
0   KL filter       x2_informative  17.0  0.000135    None  number_of_bins: 10
0   KL filter       x31_irrelevant  18.0  0.000132    None  number_of_bins: 10
0   KL filter       x19_irrelevant  19.0  0.000130    None  number_of_bins: 10
0   KL filter       x40_irrelevant  20.0  0.000125    None  number_of_bins: 10
0   KL filter       x44_irrelevant  21.0  0.000124    None  number_of_bins: 10
0   KL filter  x61_uplift_decrease  22.0  0.000118    None  number_of_bins: 10
0   KL filter  x60_uplift_decrease  23.0  0.000118    None  number_of_bins: 10
0   KL filter  x63_uplift_decrease  24.0  0.000112    None  number_of_bins: 10
0   KL filter       x32_irrelevant  25.0  0.000109    None  number_of_bins: 10
0   KL filter       x35_irrelevant  26.0  0.000104    None  number_of_bins: 10
0   KL filter       x14_irrelevant  27.0  0.000102    None  number_of_bins: 10
0   KL filter       x38_irrelevant  28.0  0.000094    None  number_of_bins: 10
0   KL filter       x27_irrelevant  29.0  0.000091    None  number_of_bins: 10
0   KL filter       x33_irrelevant  30.0  0.000090    None  number_of_bins: 10
..        ...                  ...   ...       ...     ...                 ...
0   KL filter       x16_irrelevant  34.0  0.000083    None  number_of_bins: 10
0   KL filter       x34_irrelevant  35.0  0.000082    None  number_of_bins: 10
0   KL filter       x18_irrelevant  36.0  0.000076    None  number_of_bins: 10
0   KL filter       x36_irrelevant  37.0  0.000075    None  number_of_bins: 10
0   KL filter       x20_irrelevant  38.0  0.000074    None  number_of_bins: 10
0   KL filter       x4_informative  39.0  0.000073    None  number_of_bins: 10
0   KL filter       x26_irrelevant  40.0  0.000072    None  number_of_bins: 10
0   KL filter       x42_irrelevant  41.0  0.000071    None  number_of_bins: 10
0   KL filter       x8_informative  42.0  0.000071    None  number_of_bins: 10
0   KL filter       x6_informative  43.0  0.000071    None  number_of_bins: 10
0   KL filter  x62_uplift_decrease  44.0  0.000065    None  number_of_bins: 10
0   KL filter       x12_irrelevant  45.0  0.000063    None  number_of_bins: 10
0   KL filter       x5_informative  46.0  0.000062    None  number_of_bins: 10
0   KL filter       x1_informative  47.0  0.000060    None  number_of_bins: 10
0   KL filter       x49_irrelevant  48.0  0.000059    None  number_of_bins: 10
0   KL filter       x47_irrelevant  49.0  0.000058    None  number_of_bins: 10
0   KL filter       x48_irrelevant  50.0  0.000057    None  number_of_bins: 10
0   KL filter       x25_irrelevant  51.0  0.000057    None  number_of_bins: 10
0   KL filter       x22_irrelevant  52.0  0.000056    None  number_of_bins: 10
0   KL filter       x41_irrelevant  53.0  0.000049    None  number_of_bins: 10
0   KL filter       x37_irrelevant  54.0  0.000049    None  number_of_bins: 10
0   KL filter  x56_uplift_increase  55.0  0.000043    None  number_of_bins: 10
0   KL filter       x13_irrelevant  56.0  0.000039    None  number_of_bins: 10
0   KL filter       x50_irrelevant  57.0  0.000038    None  number_of_bins: 10
0   KL filter       x24_irrelevant  58.0  0.000036    None  number_of_bins: 10
0   KL filter       x29_irrelevant  59.0  0.000021    None  number_of_bins: 10
0   KL filter       x30_irrelevant  60.0  0.000020    None  number_of_bins: 10
0   KL filter       x17_irrelevant  61.0  0.000017    None  number_of_bins: 10
0   KL filter       x45_irrelevant  62.0  0.000013    None  number_of_bins: 10
0   KL filter       x7_informative  63.0  0.000011    None  number_of_bins: 10

[63 rows x 6 columns]</code></pre>
<p>We found all these 3 filter methods were able to rank most of the <strong>informative</strong> and <strong>uplift increase</strong> features on the top.</p>
<h2><span id="performance-evaluation">Performance evaluation</span></h2>
<p>Evaluate the AUUC (Area Under the Uplift Curve) score with several uplift models when using top features dataset</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># train test split</span></span><br><span class="line">df_train, df_test = train_test_split(df, test_size=<span class="number">0.2</span>, random_state=<span class="number">111</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># convert treatment column to 1 (treatment1) and 0 (control)</span></span><br><span class="line">treatments = np.where((df_test[<span class="string">&#x27;treatment_group_key&#x27;</span>]==<span class="string">&#x27;treatment1&#x27;</span>), <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">print(treatments[:<span class="number">10</span>])</span><br><span class="line">print(df_test[<span class="string">&#x27;treatment_group_key&#x27;</span>][:<span class="number">10</span>])</span><br></pre></td></tr></table></figure>
<pre><code>[1 0 0 0 0 1 0 1 1 0]
79114     treatment1
76043        control
47617        control
53169        control
175702       control
111635    treatment1
129212       control
19247     treatment1
49272     treatment1
199314       control
Name: treatment_group_key, dtype: object</code></pre>
<h3><span id="uplift-randomforest-classfier">Uplift RandomForest Classfier</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uplift_model = UpliftRandomForestClassifier(control_name=<span class="string">&#x27;control&#x27;</span>, max_depth=<span class="number">8</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># using all features</span></span><br><span class="line">features = X_names </span><br><span class="line">uplift_model.fit(X = df_train[features].values, </span><br><span class="line">                 treatment = df_train[<span class="string">&#x27;treatment_group_key&#x27;</span>].values,</span><br><span class="line">                 y = df_train[y_name].values)</span><br><span class="line">y_preds = uplift_model.predict(df_test[features].values)</span><br></pre></td></tr></table></figure>
<h3><span id="select-top-n-features-based-on-kl-filter">Select top N features based on KL filter</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top_n = <span class="number">10</span></span><br><span class="line">top_10_features = kl_imp[<span class="string">&#x27;feature&#x27;</span>][:top_n]</span><br><span class="line">print(top_10_features)</span><br></pre></td></tr></table></figure>
<pre><code>0    x51_uplift_increase
0    x57_uplift_increase
0         x9_informative
0    x54_uplift_increase
0    x58_uplift_increase
0    x52_uplift_increase
0    x55_uplift_increase
0         x23_irrelevant
0       x59_increase_mix
0         x21_irrelevant
Name: feature, dtype: object</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top_n = <span class="number">15</span></span><br><span class="line">top_15_features = kl_imp[<span class="string">&#x27;feature&#x27;</span>][:top_n]</span><br><span class="line">print(top_15_features)</span><br></pre></td></tr></table></figure>
<pre><code>0    x51_uplift_increase
0    x57_uplift_increase
0         x9_informative
0    x54_uplift_increase
0    x58_uplift_increase
0    x52_uplift_increase
0    x55_uplift_increase
0         x23_irrelevant
0       x59_increase_mix
0         x21_irrelevant
0         x15_irrelevant
0         x11_irrelevant
0         x46_irrelevant
0         x39_irrelevant
0    x53_uplift_increase
Name: feature, dtype: object</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top_n = <span class="number">20</span></span><br><span class="line">top_20_features = kl_imp[<span class="string">&#x27;feature&#x27;</span>][:top_n]</span><br><span class="line">print(top_20_features)</span><br></pre></td></tr></table></figure>
<pre><code>0    x51_uplift_increase
0    x57_uplift_increase
0         x9_informative
0    x54_uplift_increase
0    x58_uplift_increase
0    x52_uplift_increase
0    x55_uplift_increase
0         x23_irrelevant
0       x59_increase_mix
0         x21_irrelevant
0         x15_irrelevant
0         x11_irrelevant
0         x46_irrelevant
0         x39_irrelevant
0    x53_uplift_increase
0        x10_informative
0         x2_informative
0         x31_irrelevant
0         x19_irrelevant
0         x40_irrelevant
Name: feature, dtype: object</code></pre>
<h4><span id="train-the-uplift-model-again-with-top-n-features">Train the Uplift model again with top N features</span></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># using top 10 features</span></span><br><span class="line">features = top_10_features </span><br><span class="line"></span><br><span class="line">uplift_model.fit(X = df_train[features].values, </span><br><span class="line">                 treatment = df_train[<span class="string">&#x27;treatment_group_key&#x27;</span>].values,</span><br><span class="line">                 y = df_train[y_name].values)</span><br><span class="line">y_preds_t10 = uplift_model.predict(df_test[features].values)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># using top 15 features</span></span><br><span class="line">features = top_15_features </span><br><span class="line"></span><br><span class="line">uplift_model.fit(X = df_train[features].values, </span><br><span class="line">                 treatment = df_train[<span class="string">&#x27;treatment_group_key&#x27;</span>].values,</span><br><span class="line">                 y = df_train[y_name].values)</span><br><span class="line">y_preds_t15 = uplift_model.predict(df_test[features].values)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># using top 20 features</span></span><br><span class="line">features = top_20_features</span><br><span class="line"></span><br><span class="line">uplift_model.fit(X = df_train[features].values, </span><br><span class="line">                 treatment = df_train[<span class="string">&#x27;treatment_group_key&#x27;</span>].values,</span><br><span class="line">                 y = df_train[y_name].values)</span><br><span class="line">y_preds_t20 = uplift_model.predict(df_test[features].values)</span><br></pre></td></tr></table></figure>
<h3><span id="print-results-for-uplift-model">Print results for Uplift model</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df_preds = pd.DataFrame([y_preds.ravel(), </span><br><span class="line">                         y_preds_t10.ravel(),</span><br><span class="line">                         y_preds_t15.ravel(),</span><br><span class="line">                         y_preds_t20.ravel(),</span><br><span class="line">                         treatments,</span><br><span class="line">                         df_test[y_name].ravel()],</span><br><span class="line">                        index=[<span class="string">&#x27;All&#x27;</span>, <span class="string">&#x27;Top 10&#x27;</span>, <span class="string">&#x27;Top 15&#x27;</span>, <span class="string">&#x27;Top 20&#x27;</span>, <span class="string">&#x27;is_treated&#x27;</span>, y_name]).T</span><br><span class="line"></span><br><span class="line">plot_gain(df_preds, outcome_col=y_name, treatment_col=<span class="string">&#x27;is_treated&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure>
<img src="/.io//jupyter_38_0.png" alt="png"><figcaption aria-hidden="true">png</figcaption>
</figure>
</div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5faeaef89fba030012a7dd31&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/jaysung00" target="_blank" rel="external nofollow noopener noreferrer" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/12/17/Uplift-tree/"><span class="level-item">ã€Uplift Modelingã€‘Uplift treeì— ê´€í•œ ë…¼ë¬¸ ë‚´ìš© ë²ˆì—­</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://jaysung00.github.io/2020/12/17/jupyter/';
            this.page.identifier = '2020/12/17/jupyter/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'jays-hexo-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1</span><span class="level-item">Feature Selection for Uplift Modeling</span></span></a><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.1.1</span><span class="level-item">Generate dataset</span></span></a></li></ul><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Feature selection with Filter methods</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">method = F (F statistics)</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">method = LR (likelihood ratio test)</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">method = KL (KL divergence)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Performance evaluation</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">Uplift RandomForest Classfier</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">Select top N features based on KL filter</span></span></a></li><li><a class="level is-mobile" href="#"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">Print results for Uplift model</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2020-12-17T11:19:15.000Z">2020-12-17</time></p><p class="title"><a href="/2020/12/17/jupyter/">jupyter</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2020-12-17T01:53:17.000Z">2020-12-17</time></p><p class="title"><a href="/2020/12/17/Uplift-tree/">ã€Uplift Modelingã€‘Uplift treeì— ê´€í•œ ë…¼ë¬¸ ë‚´ìš© ë²ˆì—­</a></p><p class="categories"><a href="/categories/UPLIFT-MODELING/">UPLIFT MODELING</a> / <a href="/categories/UPLIFT-MODELING/c-Methods/">c.Methods</a> / <a href="/categories/UPLIFT-MODELING/c-Methods/2-Tree-based-Algorithm/">2.Tree-based Algorithm</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2020-12-17T01:46:51.000Z">2020-12-17</time></p><p class="title"><a href="/2020/12/17/Selection/">ã€Uplift Modelingã€‘ë³€ìˆ˜ì˜ ì„ íƒë°©ë²•ì— ëŒ€í•˜ì—¬</a></p><p class="categories"><a href="/categories/UPLIFT-MODELING/">UPLIFT MODELING</a> / <a href="/categories/UPLIFT-MODELING/b-Feature-Selection/">b.Feature Selection</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2020-12-17T01:40:48.000Z">2020-12-17</time></p><p class="title"><a href="/2020/12/17/UM-overview/">ã€Uplift Modelingã€‘ë„ìž…ì˜ ë°°ê²½ì— ëŒ€í•´ ìƒê°í•´ë³´ìž</a></p><p class="categories"><a href="/categories/UPLIFT-MODELING/">UPLIFT MODELING</a> / <a href="/categories/UPLIFT-MODELING/a-Overall/">a.Overall</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/12/04/CN2/"><img src="https://i.imgur.com/hHuRkYo.jpg" alt="ã€Causal Inferenceâ‘¡ã€‘ì¡°ìž‘ë³€ìˆ˜ë²•(IV)ì— ê´€í•˜ì—¬"></a></figure><div class="media-content"><p class="date"><time datetime="2020-12-04T08:34:44.000Z">2020-12-04</time></p><p class="title"><a href="/2020/12/04/CN2/">ã€Causal Inferenceâ‘¡ã€‘ì¡°ìž‘ë³€ìˆ˜ë²•(IV)ì— ê´€í•˜ì—¬</a></p><p class="categories"><a href="/categories/Prerequisite/">Prerequisite</a> / <a href="/categories/Prerequisite/Causal-Inference/">Causal Inference</a> / <a href="/categories/Prerequisite/Causal-Inference/a-Overall/">a.Overall</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Prerequisite/"><span class="level-start"><span class="level-item">Prerequisite</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/Prerequisite/Causal-Inference/"><span class="level-start"><span class="level-item">Causal Inference</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/Prerequisite/Causal-Inference/a-Overall/"><span class="level-start"><span class="level-item">a.Overall</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Prerequisite/Causal-Inference/b-Bayesian-Network/"><span class="level-start"><span class="level-item">b.Bayesian Network</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/UPLIFT-MODELING/"><span class="level-start"><span class="level-item">UPLIFT MODELING</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/UPLIFT-MODELING/a-Overall/"><span class="level-start"><span class="level-item">a.Overall</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/UPLIFT-MODELING/b-Feature-Selection/"><span class="level-start"><span class="level-item">b.Feature Selection</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/UPLIFT-MODELING/c-Methods/"><span class="level-start"><span class="level-item">c.Methods</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/UPLIFT-MODELING/c-Methods/2-Tree-based-Algorithm/"><span class="level-start"><span class="level-item">2.Tree-based Algorithm</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://i.imgur.com/fQTl3A4.png" alt="Jay Sung&#039;s DS blog" height="28"></a><p class="is-size-7"><span>&copy; 2020 Jay Sung</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'folded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>